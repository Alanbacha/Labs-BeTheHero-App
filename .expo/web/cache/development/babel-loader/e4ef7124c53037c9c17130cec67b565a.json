{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Programacao\\\\Labs\\\\Labs-BeTheHero\\\\Labs-BeTheHero-App\\\\src\\\\pages\\\\Incidents\\\\index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { Feather } from \"@expo/vector-icons\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport api from \"../../services/api\";\nimport logoImg from \"../../assets/logo.png\";\nimport styles from \"./styles\";\nexport default function Incidents() {\n  var navigation = useNavigation();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      incidents = _useState2[0],\n      setIncidents = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      total = _useState4[0],\n      setTotal = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      page = _useState6[0],\n      setPage = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      loading = _useState8[0],\n      setLoading = _useState8[1];\n\n  useEffect(loadIncidents);\n\n  function loadIncidents() {\n    if (loading) {\n      return;\n    }\n\n    if (total > 0 && incidents.length === total) {\n      return;\n    }\n\n    setLoading(true);\n    api.get(\"incident\", {\n      params: {\n        page: page\n      }\n    }).then(function (res) {\n      setIncidents([].concat(_toConsumableArray(incidents), _toConsumableArray(res.data)));\n      setTotal(res.headers[\"x-total-count\"]);\n      setPage(page + 1);\n      setLoading(false);\n    });\n  }\n\n  function navigationToDetails(incident) {\n    navigation.navigate(\"Details\", {\n      incident: incident\n    });\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: styles.header,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }\n  }, React.createElement(Image, {\n    source: logoImg,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }), React.createElement(Text, {\n    style: styles.headerText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, \"Total de \", React.createElement(Text, {\n    style: styles.headerTextBold,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 15\n    }\n  }, total, \" casos\"), \".\")), React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }\n  }, \"Bem-vindo!\"), React.createElement(Text, {\n    style: styles.description,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }\n  }, \"Escolha um dos casos abaixo e salve o dia.\"), React.createElement(FlatList, {\n    style: styles.incidentList,\n    showsVerticalScrollIndicator: false,\n    data: incidents,\n    onEndReached: loadIncidents,\n    onEndReachedThreshold: 0.2,\n    keyExtractor: function keyExtractor(incident) {\n      return String(incident.id);\n    },\n    renderItem: function renderItem(_ref) {\n      var incident = _ref.item;\n      return React.createElement(View, {\n        style: styles.incident,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 6\n        }\n      }, React.createElement(Text, {\n        style: styles.incidentProperty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 7\n        }\n      }, \"ONG:\"), React.createElement(Text, {\n        style: styles.incidentValue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 7\n        }\n      }, incident.name), React.createElement(Text, {\n        style: styles.incidentProperty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 7\n        }\n      }, \"CASO:\"), React.createElement(Text, {\n        style: styles.incidentValue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 7\n        }\n      }, incident.description), React.createElement(Text, {\n        style: styles.incidentProperty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 7\n        }\n      }, \"VALOR:\"), React.createElement(Text, {\n        style: styles.incidentValue,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 7\n        }\n      }, Intl.NumberFormat(\"pt-BR\", {\n        style: \"currency\",\n        currency: \"BRL\"\n      }).format(incident.value)), React.createElement(TouchableOpacity, {\n        style: styles.detailsButton,\n        onPress: function onPress() {\n          navigationToDetails(incident);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        style: styles.detailsButtonText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 8\n        }\n      }, \"Ver mais detalhes\"), React.createElement(Feather, {\n        name: \"arrow-right\",\n        size: 16,\n        color: \"#e02041\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 8\n        }\n      })));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 4\n    }\n  }));\n}","map":{"version":3,"sources":["C:/Programacao/Labs/Labs-BeTheHero/Labs-BeTheHero-App/src/pages/Incidents/index.js"],"names":["React","useState","useEffect","Feather","useNavigation","api","logoImg","styles","Incidents","navigation","incidents","setIncidents","total","setTotal","page","setPage","loading","setLoading","loadIncidents","length","get","params","then","res","data","headers","navigationToDetails","incident","navigate","container","header","headerText","headerTextBold","title","description","incidentList","String","id","item","incidentProperty","incidentValue","name","Intl","NumberFormat","style","currency","format","value","detailsButton","detailsButtonText"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Feather } from \"@expo/vector-icons\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { View, FlatList, Image, Text, TouchableOpacity } from \"react-native\";\r\n\r\nimport api from \"../../services/api\";\r\n\r\nimport logoImg from \"../../assets/logo.png\";\r\n\r\nimport styles from \"./styles\";\r\n\r\nexport default function Incidents() {\r\n\tconst navigation = useNavigation();\r\n\r\n\tconst [incidents, setIncidents] = useState([]);\r\n\tconst [total, setTotal] = useState(0);\r\n\tconst [page, setPage] = useState(1);\r\n\tconst [loading, setLoading] = useState(false);\r\n\r\n\tuseEffect(loadIncidents);\r\n\r\n\tfunction loadIncidents() {\r\n\t\tif (loading) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (total > 0 && incidents.length === total) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tsetLoading(true);\r\n\t\tapi.get(\"incident\", { params: { page } }).then(res => {\r\n\t\t\tsetIncidents([...incidents, ...res.data]);\r\n\t\t\tsetTotal(res.headers[\"x-total-count\"]);\r\n\t\t\tsetPage(page + 1);\r\n\t\t\tsetLoading(false);\r\n\t\t});\r\n\t}\r\n\r\n\tfunction navigationToDetails(incident) {\r\n\t\tnavigation.navigate(\"Details\", { incident });\r\n\t}\r\n\r\n\treturn (\r\n\t\t<View style={styles.container}>\r\n\t\t\t<View style={styles.header}>\r\n\t\t\t\t<Image source={logoImg} />\r\n\t\t\t\t<Text style={styles.headerText}>\r\n\t\t\t\t\tTotal de <Text style={styles.headerTextBold}>{total} casos</Text>.\r\n\t\t\t\t</Text>\r\n\t\t\t</View>\r\n\r\n\t\t\t<Text style={styles.title}>Bem-vindo!</Text>\r\n\t\t\t<Text style={styles.description}>Escolha um dos casos abaixo e salve o dia.</Text>\r\n\r\n\t\t\t<FlatList\r\n\t\t\t\tstyle={styles.incidentList}\r\n\t\t\t\tshowsVerticalScrollIndicator={false}\r\n\t\t\t\tdata={incidents}\r\n\t\t\t\tonEndReached={loadIncidents}\r\n\t\t\t\tonEndReachedThreshold={0.2}\r\n\t\t\t\tkeyExtractor={incident => String(incident.id)}\r\n\t\t\t\trenderItem={({ item: incident }) => (\r\n\t\t\t\t\t<View style={styles.incident}>\r\n\t\t\t\t\t\t<Text style={styles.incidentProperty}>ONG:</Text>\r\n\t\t\t\t\t\t<Text style={styles.incidentValue}>{incident.name}</Text>\r\n\r\n\t\t\t\t\t\t<Text style={styles.incidentProperty}>CASO:</Text>\r\n\t\t\t\t\t\t<Text style={styles.incidentValue}>{incident.description}</Text>\r\n\r\n\t\t\t\t\t\t<Text style={styles.incidentProperty}>VALOR:</Text>\r\n\t\t\t\t\t\t<Text style={styles.incidentValue}>{Intl.NumberFormat(\"pt-BR\", { style: \"currency\", currency: \"BRL\" }).format(incident.value)}</Text>\r\n\r\n\t\t\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\t\t\tstyle={styles.detailsButton}\r\n\t\t\t\t\t\t\tonPress={() => {\r\n\t\t\t\t\t\t\t\tnavigationToDetails(incident);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Text style={styles.detailsButtonText}>Ver mais detalhes</Text>\r\n\t\t\t\t\t\t\t<Feather name=\"arrow-right\" size={16} color=\"#e02041\" />\r\n\t\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t)}\r\n\t\t\t/>\r\n\t\t</View>\r\n\t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}